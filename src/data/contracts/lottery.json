{
  "name": "Ōkinoko Takara (Lottery)",
  "id": 5,
  "sortIndex": 3,
  "vscId": "vsc1BiM4NC1yeGPCjmq8FC3utX8dByizjcCBk7",
  "owner": "tibfox.vsc",
  "deployedOn": "2025-12-20T13:11:27",
  "verifiedOn": "2025-12-20T13:12:30",
  "description": "Create and participate in on-chain lotteries with customizable prize distributions, burn rates, and optional donations.",
  "icon": "faTicket",
  "kanji": "宝",
  "functions": [
    {
      "name": "create_lottery",
      "friendlyName": "Create Lottery",
      "description": "Create a new lottery with custom parameters including name, deadline, burn percentage, winner prize distribution, and ticket price. You can optionally configure a donation to a specific account.",
      "parse": "csv",
      "delimiter": "|",
      "excludeKeys": true,
      "parameters": [
        {
          "name": "Lottery Name",
          "payloadName": "name",
          "type": "string",
          "mandatory": true,
          "hintText": "Give your lottery a descriptive name (max 100 characters, no pipe characters)",
          "sortIndex": 1
        },
        {
          "name": "Deadline (hours)",
          "payloadName": "deadlineHours",
          "type": "int",
          "asString": false,
          "mandatory": true,
          "hintText": "Number of hours until the lottery ends: 1 - 2160 hours (90 days)",
          "min": 1,
          "max": 2160,
          "sortIndex": 2
        },
        {
          "name": "Burn Percent",
          "payloadName": "burnPercent",
          "type": "int",
          "asString": false,
          "mandatory": true,
          "hintText": "Percentage of the pool to burn (5-75%)",
          "min": 5,
          "max": 75,
          "sortIndex": 3
        },
        {
          "name": "Winner Shares (comma-separated)",
          "payloadName": "winnerShares",
          "type": "string",
          "mandatory": true,
          "hintText": "Prize distribution percentages that must sum to 100. Example: 50,30,20 for 3 winners",
          "sortIndex": 4
        },
        {
          "name": "Ticket Price",
          "payloadName": "ticketPrice",
          "type": "number",
          "asString": false,
          "mandatory": true,
          "hintText": "Price per ticket (minimum 0.001)",
          "min": 0.001,
          "sortIndex": 5
        },
        {
          "name": "Donation Account",
          "payloadName": "donationAccount",
          "type": "address",
          "mandatory": false,
          "hintText": "Optional account to receive donations from the pool",
          "sortIndex": 6
        },
        {
          "name": "Donation Percentage",
          "payloadName": "donationPercent",
          "type": "int",
          "asString": false,
          "mandatory": false,
          "hintText": "Percentage to donate (0-50%) from the pool. Burn + donation cannot exceed 90%",
          "min": 0,
          "max": 50,
          "sortIndex": 7
        },
        {
          "name": "Metadata",
          "payloadName": "metadata",
          "type": "lottery_meta",
          "asString": false,
          "mandatory": false,
          "hintText": "Metadata for the lottery (will not be used by contract but can be useful for frontends)",
          "sortIndex": 9
        }
      ],
      "hintText": "Note: After creation, you'll receive a lottery ID. Keep it to manage your lottery.",
      "groupHeader": "Lottery Management"
    },
    {
      "name": "join_lottery",
      "friendlyName": "Buy Tickets",
      "description": "Join an existing lottery by purchasing tickets. The number of tickets is determined by your transfer.allow intent divided by the ticket price. You can buy multiple tickets at once.",
      "parse": "raw",
      "parameters": [
        {
          "name": "Lottery",
          "payloadName": "lotteryId",
          "type": "lotteryDropdown",
          "asString": false,
          "mandatory": true,
          "hintText": "Select an active lottery to join",
          "sortIndex": 1,
          "graphqlQuery": "oki_lottery_v2_active",
          "valueField": "id",
          "labelTemplate": "#{id}: {name}",
          "subtitleTemplate": "Ticket: {ticket_price} {asset} | Burn: {burn_percent}% | Deadline: {deadline}",
          "orderBy": "deadline"
        },
        {
          "name": "Payment",
          "payloadName": "vscIntent",
          "type": "vscIntent",
          "mandatory": true,
          "hintText": "Amount to spend on tickets. Must match the lottery's asset and be a multiple of ticket price.",
          "sortIndex": 2
        }
      ],
      "hintText": "You can join the same lottery multiple times to buy more tickets.",
      "groupHeader": "Lottery Management"
    },
    {
      "name": "execute_lottery",
      "friendlyName": "Execute Lottery",
      "description": "Execute the lottery after the deadline has passed. This selects the winners randomly, distributes prizes, burns tokens, and sends donations if configured. Anyone can execute a lottery once its deadline is reached.",
      "parse": "raw",
      "parameters": [
        {
          "name": "Lottery ID",
          "payloadName": "lotteryId",
          "type": "lotteryDropdown",
          "asString": false,
          "mandatory": true,
          "hintText": "The ID of the lottery to execute",
          "sortIndex": 1,
          "graphqlQuery": "oki_lottery_v2_current_state",
          "valueField": "id",
          "labelTemplate": "#{id}: {name}",
          "subtitleTemplate": "Ticket: {ticket_price} {asset} | Burn: {burn_percent}% | Deadline: {deadline}",
          "orderBy": "deadline"
        }
      ],
      "hintText": "The lottery must have passed its deadline and have at least one participant.",
      "groupHeader": "Lottery Management"
    },
    {
      "name": "verify_lottery",
      "friendlyName": "Verify Lottery Results",
      "description": "Verify that a lottery's winners were fairly selected by re-running the winner selection algorithm with the lottery's random seed. This allows anyone to independently verify the results.",
      "parse": "csv",
      "delimiter": "|",
      "excludeKeys": true,
      "parameters": [
        {
          "name": "Lottery ID",
          "payloadName": "lotteryId",
          "type": "lotteryDropdown",
          "asString": false,
          "mandatory": true,
          "hintText": "The ID of the executed lottery to verify",
          "sortIndex": 1,
          "graphqlQuery": "oki_lottery_v2_current_state",
          "valueField": "id",
          "labelTemplate": "#{id}: {name}",
          "subtitleTemplate": "Ticket: {ticket_price} {asset} | Burn: {burn_percent}% | Deadline: {deadline}",
          "orderBy": "deadline"
        },
        {
          "name": "Random Seed",
          "payloadName": "seed",
          "type": "number",
          "asString": false,
          "mandatory": true,
          "hintText": "The random seed used in the lottery (found in lottery execution event)",
          "sortIndex": 2
        }
      ],
      "hintText": "This is a read-only verification function that outputs the winner selection process.",
      "groupHeader": "Verification"
    },
    {
      "name": "change_lottery_metadata",
      "friendlyName": "Change Lottery Metadata",
      "description": "The owner of the lottery can change the lottery metadata.",
      "parse": "csv",
      "delimiter": "|",
      "excludeKeys": true,
      "parameters": [
        {
          "name": "Lottery ID",
          "payloadName": "lotteryId",
          "type": "lotteryDropdown",
          "asString": false,
          "mandatory": true,
          "hintText": "The ID of the executed lottery to verify",
          "sortIndex": 1,
          "graphqlQuery": "oki_lottery_v2_current_state",
          "valueField": "id",
          "labelTemplate": "#{id}: {name}",
          "subtitleTemplate": "Ticket: {ticket_price} {asset} | Burn: {burn_percent}% | Deadline: {deadline}",
          "orderBy": "deadline"
        },
        {
          "name": "Metdata",
          "payloadName": "metadata",
          "type": "lottery_meta",
          "asString": false,
          "mandatory": true,
          "hintText": "The new metadata for the lottery",
          "sortIndex": 2
        }
      ],
      "hintText": "Only the lottery owner can change the metadata like description or post urls.",
      "groupHeader": "Lottery Management"
    }
  ]
}
